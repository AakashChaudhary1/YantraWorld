"use strict";(self.webpackChunkYantraWorld=self.webpackChunkYantraWorld||[]).push([[354],{7354:(Dt,D,d)=>{d.r(D),d.d(D,{CreditDebitModule:()=>xt});var u=d(8781),p=d(1669),Z=d(8372),A=d(1884),y=d(7579),l=d(433),t=d(1571),S=d(3835),_=d(8107),h=d(8132),f=d(4417),C=d(4852),c=d(6895),b=d(4339),T=d(324),v=d(2334);let x=(()=>{class i{transform(e,r="created_on"){if(!e)return null;const a=e.reduce((o,s)=>{var m=new Date(s[r]);let g=m.getDate()+"/"+(m.getMonth()+1)+"/"+m.getFullYear();return o[g]||(o[g]=[]),o[g].push(s),o},{});return Object.keys(a).map(o=>{let s=o.split("/");return{date:new Date(parseInt(s[2]),parseInt(s[1])-1,parseInt(s[0])),arr:a[o]}})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"groupByDate",type:i,pure:!0}),i})();function U(i,n){if(1&i&&(t.TgZ(0,"div",29)(1,"strong"),t._uU(2),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.lnq("",e.f.action_for.value[0].name," ko aap Rs.",e.f.amount.value," ","credit"==e.f.type.value?"Recieved Kar rhe ho":"debit"==e.f.type.value?"Ka Maal diya hai":"Ka discount Diy hai","")}}function O(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"customer is required"),t.qZA())}function I(i,n){if(1&i&&(t.TgZ(0,"div",30),t.YNc(1,O,2,0,"div",31),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.action_for.errors.required)}}function M(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Amount is required"),t.qZA())}function q(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Min value is 1"),t.qZA())}function P(i,n){if(1&i&&(t.TgZ(0,"div",30),t.YNc(1,M,2,0,"div",31),t.YNc(2,q,2,0,"div",31),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.amount.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.amount.errors.min)}}const L=function(i){return["/emp-access/order-detail/",i]};function k(i,n){if(1&i&&(t.TgZ(0,"a",44)(1,"u"),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,L,e.order_id)),t.xp6(2),t.hij(" ",e.order_id,"")}}function w(i,n){if(1&i&&(t.TgZ(0,"a",44)(1,"u"),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,L,e.OrderId)),t.xp6(2),t.hij(" ",e.OrderId,"")}}function F(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"timeAgo"),t.ALo(3,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.pd_created_on)," On ",t.lcZ(3,4,e.pd_created_on),", ")}}function B(i,n){1&i&&(t.TgZ(0,"span"),t._uU(1," Never Recieved, "),t.qZA())}const N=function(i){return["/credit-debit/audit/",i]},J=function(){return{flag:0}};function Y(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"li",36)(1,"span",37),t._uU(2),t.TgZ(3,"small"),t._uU(4),t.qZA()(),t.TgZ(5,"a",38),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.OrderService.getPendingOrderForCustomerAndSendWhatsapp(o.customer_id,o.mob_phone,o.cname))}),t._UZ(6,"i",39),t.qZA(),t._UZ(7,"br"),t.TgZ(8,"small",40),t._UZ(9,"i",41),t._uU(10," Last order "),t.YNc(11,k,3,4,"a",42),t._uU(12),t.ALo(13,"timeAgo"),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"small",40),t._UZ(16,"i",43),t._uU(17),t.YNc(18,w,3,4,"a",42),t.YNc(19,F,4,6,"span",31),t.YNc(20,B,2,0,"span",31),t.qZA()()}if(2&i){const e=n.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(15,N,e.customer_id))("queryParams",t.DdM(17,J)),t.xp6(1),t.hij(" ",e.cname," "),t.xp6(2),t.hij("",e.Balance&&e.Balance>0?e.Balance+" Due":-e.Balance+" Advanced",", "),t.xp6(7),t.Q6J("ngIf",r.user&&r.user.Role<=8),t.xp6(1),t.AsE(", ",t.lcZ(13,11,e.o_created_on)," On ",t.lcZ(14,13,e.o_created_on),", "),t.xp6(5),t.hij(" Last Payment ",e.Amount,", "),t.xp6(1),t.Q6J("ngIf",e.OrderId),t.xp6(1),t.Q6J("ngIf",e.pd_created_on),t.xp6(1),t.Q6J("ngIf",!e.pd_created_on)}}function Q(i,n){if(1&i&&(t.TgZ(0,"li",32),t._UZ(1,"hr"),t.TgZ(2,"div",1)(3,"h6",33),t._uU(4),t.ALo(5,"date"),t.ALo(6,"timeAgo"),t.qZA()(),t._UZ(7,"hr"),t.TgZ(8,"div",1)(9,"ul",34),t.YNc(10,Y,21,18,"li",35),t.qZA()()()),2&i){const e=n.$implicit;t.xp6(4),t.AsE("",t.xi3(5,3,e.date,"mediumDate")," -- ",t.lcZ(6,6,e.date),""),t.xp6(6),t.Q6J("ngForOf",e.arr)}}let j=(()=>{class i{constructor(e,r,a,o,s,m){this.MasterService=e,this.CreditDebitService=r,this.formBuilder=a,this.OrderService=o,this.dataService=s,this.globalService=m,this.orderList=[],this.Count=1e3,this.searchModelChanged=new y.x,this.filterStatus=[{StatusId:1,StatusName:"Placed"},{StatusId:2,StatusName:"Confirmed"},{StatusId:5,StatusName:"Delivered & PaymentPending"},{StatusId:6,StatusName:"Paid & DeliveryPending"}],this.allowedStatus=[5],this.ledgerToggle=!1,this.dropdownList=[],this.selectedItems=[],this.dropdownSettings={},this.showItems={},this.filterStatus=this.dataService.getSelectedStatusFromLocalStorage()}ngOnInit(){this.ledgerForm=this.formBuilder.group({action_for:["",l.kI.required],type:["debit",l.kI.required],amount:["",[l.kI.required,l.kI.min(1)]],description:[""]}),this.user=this.dataService.getUserFromLocalStorage(),this.getAllCreditDebitCommulative(),this.getStatusMaster(),this.searchCustomer(),this.searchModelChangeSubscription=this.searchModelChanged.pipe((0,Z.b)(800),(0,A.x)()).subscribe(e=>{this.searchText=e?e.trim():"",console.log(e),this.searchCustomer()}),this.dropdownSettings={singleSelection:!0,idField:"customer_id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:100,allowSearchFilter:!0,closeDropDownOnSelection:!0,noDataAvailablePlaceholderText:"No Data Available"}}get f(){return this.ledgerForm.controls}onChangeSelectedUser(e){this.SelectedUser=e,this.getorderByCustomerId()}searchCustomer(){this.MasterService.SearchCustomer({SearchString:this.searchText||""}).subscribe(r=>{200==r.status&&(this.customerList=r.data&&r.data.length?r.data:[{customer_id:0,name:"No Data"}])})}deleteLedger(e){this.CreditDebitService.deleteCreditDebitById(e).subscribe(r=>{alert(r.message),200==r.status&&this.getAllCreditDebitCommulative()})}onSubmitForm(){this.submitted=!0,!this.ledgerForm.invalid&&(this.ledgerForm.value.action_for="number"==typeof this.ledgerForm.value.action_for?this.ledgerForm.value.action_for:this.ledgerForm.value.action_for[0].customer_id,this.ledgerForm.value.CustomerId=this.user.customer_id,this.CreditDebitService.addNewStatementByCustomerId(this.ledgerForm.value).subscribe(e=>{alert(e.message)},e=>{}))}getAllCreditDebitCommulative(){this.CreditDebitService.getAllCreditDebitCommulative().subscribe(r=>{200==r.status&&(this.creditDebitListOriginal=r.data,this.creditDebitList=r.data)})}filterLedger(e){this.creditDebitList=this.creditDebitListOriginal,e&&(this.creditDebitList=this.creditDebitList.filter(r=>r.Balance>0))}getPendingAmountForUser(){}getAllPendingPayments(){}Remaining(e=0,r=0){return Math.round(e-r)}getStatusMaster(){this.MasterService.getStatusMaster().subscribe(e=>{200==e.status&&(this.status=e.data)})}getorderByCustomerId(){this.MasterService.getorderByCustomerId(this.SelectedUser.customer_id).subscribe(e=>{200==e.status&&(this.orderListOriginal=e.data,this.orderList=e.data)})}onChangeStatus(e,r){confirm(r.cName+'ji ka "'+r.units+" "+r.name+'" ka status change karna hai? Amount: Rs. '+r.units*r.unit_cost+"?")}onCancelCompleteCreditDebit(e){confirm(e.cName+"ji ka complete "+e.order_id+" order cancel krna hai? ")}filterCreditDebit(e){this.orderList=this.orderListOriginal,this.orderList=e.length?this.globalService.filterByValue(this.orderList,e):this.orderListOriginal,console.log(this.orderList)}onItemSelect(e){console.log(e)}onSelectAll(e){console.log(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(S.m),t.Y36(_.g),t.Y36(l.qu),t.Y36(h.p),t.Y36(f.D),t.Y36(C.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-debit-cummulative"]],decls:55,vars:15,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-12","text-center"],["class","ft-19 col-md-12 text-primary",4,"ngIf"],[1,"col-md-12"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"form-group","col-md-4"],["for","action_for",1,"text-uppercase"],["formControlName","action_for",1,"w-100",3,"settings","data","onFilterChange"],["class","text-danger",4,"ngIf"],["for","amount",1,"text-uppercase"],["type","number","formControlName","amount",1,"form-control"],["for","description",1,"text-uppercase"],["type","text","formControlName","description","ngClass","{ 'is-invalid': submitted && f.description.errors }",1,"form-control"],[1,"form-group","col-md-4","display-6"],["formControlName","type","type","radio","id","flexRadioDefault1",1,"form-group",3,"value"],["for","flexRadioDefault1",1,"form-group","mr-","text-success"],["formControlName","type","type","radio","id","flexRadioDefault2",1,"form-group",3,"checked","value"],["for","flexRadioDefault2",1,"form-group","mr-","text-danger"],["formControlName","type","type","radio","id","flexRadioDefault3",1,"form-group",3,"value"],["for","flexRadioDefault3",1,"form-group","mr-","text-warning"],[1,"col-md-12","pull-right","mt-2"],["type","submit",1,"btn","btn-danger","pull-right","mb-5"],[1,"hr-2"],[1,"switch"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider","round"],[1,"m-0","p-0"],["class","list-unstyled",4,"ngFor","ngForOf"],[1,"ft-19","col-md-12","text-primary"],[1,"text-danger"],[4,"ngIf"],[1,"list-unstyled"],[1,"date","bg-dark","text-white","rounded","font-italic"],[1,"card-ul","w-100"],["class","card-li credit","ngClass","{'deleted border-light': item.IsDelete}",4,"ngFor","ngForOf"],["ngClass","{'deleted border-light': item.IsDelete}",1,"card-li","credit"],["ngClass","{'green-text': item.Balance <= 0, 'text-red': item.Balance > 0}",1,"m-0","ft-30","cursor-p",3,"routerLink","queryParams"],["href","javascript:void(0);",1,"",3,"click"],["aria-hidden","true",1,"fa","fa-whatsapp","ft-30"],[1,"text-muted"],["aria-hidden","true",1,"fa","ft-19","fa-arrow-up","text-red"],["href","javascript:void(0)","routerLinkActive","router-link-active",3,"routerLink",4,"ngIf"],["aria-hidden","true",1,"fa","ft-19","fa-arrow-down","green-text"],["href","javascript:void(0)","routerLinkActive","router-link-active",3,"routerLink"]],template:function(e,r){1&e&&(t._UZ(0,"app-header")(1,"br"),t.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"h3")(6,"strong")(7,"u"),t._uU(8,"Insert Ledger"),t.qZA()()()(),t.YNc(9,U,3,3,"div",3),t.TgZ(10,"div",4)(11,"form",5),t.NdJ("ngSubmit",function(){return r.onSubmitForm()}),t.TgZ(12,"div",1)(13,"div",6)(14,"label",7),t._uU(15,"customer"),t.qZA(),t.TgZ(16,"ng-multiselect-dropdown",8),t.NdJ("onFilterChange",function(o){return r.searchModelChanged.next(o)}),t.qZA(),t.YNc(17,I,2,1,"div",9),t.qZA(),t.TgZ(18,"div",6)(19,"label",10),t._uU(20,"Amount"),t.qZA(),t._UZ(21,"input",11),t.YNc(22,P,3,2,"div",9),t.qZA(),t.TgZ(23,"div",6)(24,"label",12),t._uU(25,"Note"),t.qZA(),t._UZ(26,"input",13),t.qZA(),t.TgZ(27,"div",14),t._UZ(28,"input",15),t.TgZ(29,"label",16),t._uU(30," Recieved "),t.qZA()(),t.TgZ(31,"div",14),t._UZ(32,"input",17),t.TgZ(33,"label",18),t._uU(34," Given "),t.qZA()(),t.TgZ(35,"div",14),t._UZ(36,"input",19),t.TgZ(37,"label",20),t._uU(38," Discount "),t.qZA()(),t.TgZ(39,"div",21)(40,"button",22),t._uU(41,"Save Ledger"),t.qZA()()()()(),t._UZ(42,"hr",23),t.TgZ(43,"div",2)(44,"h3")(45,"strong")(46,"u"),t._uU(47,"Ledger All Customer "),t.qZA()(),t.TgZ(48,"label",24)(49,"input",25),t.NdJ("ngModelChange",function(o){return r.ledgerToggle=o})("ngModelChange",function(o){return r.filterLedger(o)}),t.qZA(),t._UZ(50,"span",26),t.qZA()()(),t.TgZ(51,"div",4)(52,"ul",27),t.YNc(53,Q,11,8,"li",28),t.ALo(54,"groupByDate"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("ngIf",r.submitted&&!r.f.amount.errors),t.xp6(2),t.Q6J("formGroup",r.ledgerForm),t.xp6(5),t.Q6J("settings",r.dropdownSettings)("data",r.customerList),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.action_for.errors),t.xp6(5),t.Q6J("ngIf",r.submitted&&r.f.amount.errors),t.xp6(6),t.Q6J("value","credit"),t.xp6(4),t.Q6J("checked",!0)("value","debit"),t.xp6(4),t.Q6J("value","discount"),t.xp6(13),t.Q6J("ngModel",r.ledgerToggle),t.xp6(4),t.Q6J("ngForOf",t.xi3(54,12,r.creditDebitList,"o_created_on")))},dependencies:[u.rH,u.yS,u.Od,c.mk,c.sg,c.O5,l._Y,l.Fj,l.wV,l.Wl,l._,l.JJ,l.JL,l.On,l.sg,l.u,b.P,T.O,c.uU,v.e,x],styles:['ul.card-ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}ul.card-ul[_ngcontent-%COMP%]   li.card-li[_ngcontent-%COMP%]{display:inline-block;clear:both;padding:15px;margin-bottom:4px;font-family:Helvetica,Arial,sans-serif}.credit[_ngcontent-%COMP%]{border:2px solid darkgrey;float:left;border-radius:30px;width:100%}.deleted[_ngcontent-%COMP%]{text-decoration:line-through}.date[_ngcontent-%COMP%]{padding:0 8px;margin:auto}input[type=radio][_ngcontent-%COMP%]{width:20px;height:20px}.button[_ngcontent-%COMP%]{margin-left:40%}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#ff3547}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #ff3547}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),i})();var R=d(1359);const $=function(i){return["/emp-access/order-detail/",i]};function K(i,n){if(1&i&&(t.TgZ(0,"a",19)(1,"u"),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,$,e.order_id)),t.xp6(2),t.hij(" ",e.order_id,"")}}const E=function(i){return["/order/order-detail/",i]};function G(i,n){if(1&i&&(t.TgZ(0,"a",19)(1,"u"),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,E,e.order_id)),t.xp6(2),t.hij(" ",e.order_id,"")}}function V(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.AsE("/ (",e.quantity,")--",e.pname,"")}}function W(i,n){if(1&i&&(t.TgZ(0,"small",20),t._uU(1,"Recieved By:"),t.TgZ(2,"a",21),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.payment_recieved_by_name),t.xp6(1),t.hij(" , ",t.xi3(5,2,e.credit_debit_created_on,"mediumTime"),"")}}const H=function(){return{flag:1}};function z(i,n){if(1&i&&(t.TgZ(0,"small",20),t._uU(1,"Action By:"),t.TgZ(2,"a",22),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("queryParams",t.DdM(6,H)),t.xp6(1),t.Oqu(e.sname),t.xp6(1),t.hij(" , ",t.xi3(5,3,e.credit_debit_created_on,"mediumTime"),"")}}function X(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"li",10)(1,"span",11),t._UZ(2,"i",12),t._uU(3),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"small"),t._uU(6,"Order: "),t.YNc(7,K,3,4,"a",13),t.YNc(8,G,3,4,"a",13),t.YNc(9,V,2,2,"span",14),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"small"),t._uU(12),t.qZA(),t.TgZ(13,"a",15),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.OrderService.getPendingOrderForCustomerAndSendWhatsapp(o.customer_id,o.mob_phone,o.cname))}),t._UZ(14,"i",16),t.qZA(),t._UZ(15,"br"),t.YNc(16,W,6,5,"small",17),t.YNc(17,z,6,7,"small",17),t._UZ(18,"hr",18)(19,"br"),t.TgZ(20,"small"),t._uU(21),t.qZA()()}if(2&i){const e=n.$implicit,r=t.oxw(2);t.xp6(3),t.hij(" Rs. ",e.Amount," "),t.xp6(4),t.Q6J("ngIf",r.user&&r.user.Role<=8),t.xp6(1),t.Q6J("ngIf",r.user&&r.user.Role>8),t.xp6(1),t.Q6J("ngIf",e.quantity),t.xp6(3),t.hij("For: ",e.cname,""),t.xp6(4),t.Q6J("ngIf",e.ledger_type>0),t.xp6(1),t.Q6J("ngIf",e.ledger_type<0),t.xp6(4),t.hij("ApniDukan Balance: ",e.Balance&&e.Balance>0?e.Balance+" Advanced":-e.Balance+" Due",", ")}}function tt(i,n){if(1&i&&(t.TgZ(0,"li",6),t._UZ(1,"hr"),t.TgZ(2,"div",1)(3,"h6",7),t._uU(4),t.ALo(5,"date"),t.ALo(6,"timeAgo"),t.qZA()(),t._UZ(7,"hr"),t.TgZ(8,"div",1)(9,"ul",8),t.YNc(10,X,22,8,"li",9),t.qZA()()()),2&i){const e=n.$implicit;t.xp6(4),t.AsE("",t.xi3(5,3,e.date,"mediumDate")," -- ",t.lcZ(6,6,e.date),""),t.xp6(6),t.Q6J("ngForOf",e.arr)}}let et=(()=>{class i{constructor(e,r,a,o,s,m){this.CreditDebitService=e,this.dataService=r,this.globalService=a,this.OrderService=o,this.html2pdfService=s,this.route=m,this.orderDetail=[],this.allowedStatus=[1,2,5],this.hideForPdf=!0,this.route.params.subscribe(g=>{this.CustomerId=g.id}),this.route.queryParams.subscribe(g=>{this.type=g.flag||0})}ngOnInit(){this.user=this.dataService.getUserFromLocalStorage(),0==this.type?this.getCreditDebitByCustomerId():this.getCreditDebitBySalemanId()}getInvoice(){this.hideForPdf=!1,setTimeout(()=>{this.orderDetail.length&&(document.title=this.orderDetail[0].cName+" Invoice For OrderId "+this.orderDetail[0].order_id,window.focus(),window.print()),document.title="YantraWorld",this.hideForPdf=!0},500)}deleteLedger(e){this.CreditDebitService.deleteCreditDebitById(e).subscribe(r=>{alert(r.message),200==r.status&&(0==this.type?this.getCreditDebitByCustomerId():this.getCreditDebitBySalemanId())})}getCreditDebitByCustomerId(){this.CreditDebitService.getCreditDebitByCustomerId(this.CustomerId).subscribe(e=>{200==e.status&&(this.creditDebitListOriginal=e.data.reverse(),this.creditDebitList=e.data)})}getCreditDebitBySalemanId(){this.CreditDebitService.getCreditDebitBySalemanId(this.CustomerId).subscribe(e=>{200==e.status&&(this.creditDebitListOriginal=e.data,this.creditDebitList=e.data)})}getPaymentDetail(){this.refreshFlag=!1,this.orderService.getPaymentDetail(this.CustomerId).subscribe(e=>{})}filterCreditDebit(e){this.orderDetail=this.orderDetailOriginal,this.orderDetail=e.length?this.globalService.filterByValue(this.orderDetail,e):this.orderDetailOriginal,console.log(this.orderDetail)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.g),t.Y36(f.D),t.Y36(C.U),t.Y36(h.p),t.Y36(R.G),t.Y36(u.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-debit-detail"]],decls:15,vars:6,consts:[["id","contentToConvert",1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"col-md-12"],[1,"m-0","p-0"],["class","list-unstyled",4,"ngFor","ngForOf"],[1,"list-unstyled"],[1,"date","bg-dark","text-white","rounded","font-italic"],[1,"card-ul","w-100"],["class","card-li","ngClass","{'credit': item.ledger_type > 0, 'debit': item.ledger_type < 0, 'deleted border-light': item.IsDelete}",4,"ngFor","ngForOf"],["ngClass","{'credit': item.ledger_type > 0, 'debit': item.ledger_type < 0, 'deleted border-light': item.IsDelete}",1,"card-li"],["ngClass","{'green-text': item.ledger_type > 0, 'text-red': item.ledger_type < 0}",1,"m-0","ft-30"],["ngClass","{'fa-arrow-down': item.ledger_type > 0, 'fa-arrow-up': item.ledger_type < 0}","aria-hidden","true",1,"fa","ft-19"],["href","javascript:void(0)","routerLinkActive","router-link-active",3,"routerLink",4,"ngIf"],[4,"ngIf"],["href","javascript:void(0);",1,"",3,"click"],["aria-hidden","true",1,"fa","fa-whatsapp","ft-30"],["class","text-muted",4,"ngIf"],[1,"m-0"],["href","javascript:void(0)","routerLinkActive","router-link-active",3,"routerLink"],[1,"text-muted"],["href","javascript:void(0)","routerLinkActive","router-link-active"],["href","javascript:void(0)","routerLink","[item.saleman_id]","routerLinkActive","router-link-active",3,"queryParams"]],template:function(e,r){1&e&&(t._UZ(0,"app-header")(1,"br"),t.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"h3")(6,"strong"),t._uU(7),t.TgZ(8,"u"),t._uU(9),t.qZA()()()(),t.TgZ(10,"div",3)(11,"div",3)(12,"ul",4),t.YNc(13,tt,11,8,"li",5),t.ALo(14,"groupByDate"),t.qZA()()()()()),2&e&&(t.xp6(7),t.hij("",r.type?"Retailer":"Saleman",": "),t.xp6(2),t.Oqu(r.creditDebitList&&r.creditDebitList.length?r.creditDebitList[0].cname:""),t.xp6(4),t.Q6J("ngForOf",t.xi3(14,3,r.creditDebitList,"CreatedOn")))},dependencies:[u.yS,u.Od,c.mk,c.sg,c.O5,b.P,c.uU,v.e,x],styles:["ul.card-ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}ul.card-ul[_ngcontent-%COMP%]   li.card-li[_ngcontent-%COMP%]{display:inline-block;clear:both;padding:15px;margin-bottom:4px;font-family:Helvetica,Arial,sans-serif}.credit[_ngcontent-%COMP%]{border:2px solid darkgrey;float:left;border-radius:0 30px 30px/0px 30px 30px;margin-right:20px}.debit[_ngcontent-%COMP%]{float:right;border:2px solid darkgrey;border-radius:30px 0 30px 30px/30px 0px 30px 30px;margin-left:20px}.debit[_ngcontent-%COMP%]:last-of-type{border-bottom-right-radius:30px}.deleted[_ngcontent-%COMP%]{text-decoration:line-through}.date[_ngcontent-%COMP%]{padding-left:0 8px;margin:auto}"]}),i})();const it=function(i){return["/emp-access/order-detail/",i]};function rt(i,n){if(1&i&&(t.TgZ(0,"a",21)(1,"u"),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,it,e.order_id)),t.xp6(2),t.hij(" ",e.order_id,"")}}const nt=function(i){return["/order/order-detail/",i]};function ot(i,n){if(1&i&&(t.TgZ(0,"a",21)(1,"u"),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,nt,e.order_id)),t.xp6(2),t.hij(" ",e.order_id,"")}}function at(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.AsE("/ (",e.quantity,")--",e.pname,"")}}function dt(i,n){if(1&i&&(t.TgZ(0,"small",22),t._uU(1,"Recieved By:"),t.TgZ(2,"a",23),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.payment_recieved_by_name),t.xp6(1),t.hij(" , ",t.xi3(5,2,e.credit_debit_created_on,"mediumTime"),"")}}const st=function(){return{flag:1}};function lt(i,n){if(1&i&&(t.TgZ(0,"small",22),t._uU(1,"Action By:"),t.TgZ(2,"a",24),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("queryParams",t.DdM(6,st)),t.xp6(1),t.Oqu(e.sname),t.xp6(1),t.hij(" , ",t.xi3(5,3,e.credit_debit_created_on,"mediumTime"),"")}}const ct=function(i,n,e){return{credit:i,debit:n,"deleted border-light":e}},ut=function(i,n){return{"green-text":i,"text-red":n}},mt=function(i,n){return{"fa-arrow-down":i,"fa-arrow-up":n}},gt=function(){return{flag:0}};function pt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"li",11)(1,"span",12),t._UZ(2,"i",13),t._uU(3),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"small"),t._uU(6,"Order: "),t.YNc(7,rt,3,4,"a",14),t.YNc(8,ot,3,4,"a",14),t.YNc(9,at,2,2,"span",15),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"small"),t._uU(12,"For: "),t.TgZ(13,"a",16)(14,"u"),t._uU(15),t.qZA()()(),t._UZ(16,"br"),t.YNc(17,dt,6,5,"small",17),t.TgZ(18,"a",18),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.OrderService.getPendingOrderForCustomerAndSendWhatsapp(o.customer_id,o.mob_phone,o.cname))}),t._UZ(19,"i",19),t.qZA(),t.YNc(20,lt,6,7,"small",17),t._UZ(21,"hr",20)(22,"br"),t.TgZ(23,"small"),t._uU(24),t.qZA()()}if(2&i){const e=n.$implicit,r=t.oxw(3);t.Q6J("ngClass",t.kEZ(12,ct,e.ledger_type>0,e.ledger_type<0,e.IsDelete)),t.xp6(1),t.Q6J("ngClass",t.WLB(16,ut,e.ledger_type>0,e.ledger_type<0)),t.xp6(1),t.Q6J("ngClass",t.WLB(19,mt,e.ledger_type>0,e.ledger_type<0)),t.xp6(1),t.hij(" Rs. ",e.Amount," "),t.xp6(4),t.Q6J("ngIf",r.user&&r.user.Role<=8),t.xp6(1),t.Q6J("ngIf",r.user&&r.user.Role>8),t.xp6(1),t.Q6J("ngIf",e.quantity&&e.pname),t.xp6(4),t.Q6J("queryParams",t.DdM(22,gt)),t.xp6(2),t.Oqu(e.cname),t.xp6(2),t.Q6J("ngIf",e.ledger_type>0),t.xp6(3),t.Q6J("ngIf",e.ledger_type<0),t.xp6(4),t.hij("ApniDukan Balance: ",e.Balance&&e.Balance>0?e.Balance+" Advanced":-e.Balance+" Due",", ")}}function _t(i,n){if(1&i&&(t.TgZ(0,"li",7),t._UZ(1,"hr"),t.TgZ(2,"div",1)(3,"h6",8),t._uU(4),t.ALo(5,"date"),t.ALo(6,"timeAgo"),t.qZA()(),t._UZ(7,"hr"),t.TgZ(8,"div",1)(9,"ul",9),t.YNc(10,pt,25,23,"li",10),t.qZA()()()),2&i){const e=n.$implicit;t.xp6(4),t.AsE("",t.xi3(5,3,e.date,"mediumDate")," -- ",t.lcZ(6,6,e.date),""),t.xp6(6),t.Q6J("ngForOf",e.arr)}}function ht(i,n){if(1&i&&(t.TgZ(0,"div",4)(1,"div",4)(2,"ul",5),t.YNc(3,_t,11,8,"li",6),t.ALo(4,"groupByDate"),t.qZA()()()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",t.xi3(4,1,e.creditDebitList,"CreatedOn"))}}const Ct=[{path:"audit",canActivate:[p.B],component:(()=>{class i{constructor(e,r,a,o,s){this.MasterService=e,this.CreditDebitService=r,this.dataService=a,this.OrderService=o,this.globalService=s,this.orderList=[],this.Count=1e3,this.searchModelChanged=new y.x,this.filterStatus=[{StatusId:1,StatusName:"Placed"},{StatusId:2,StatusName:"Confirmed"},{StatusId:5,StatusName:"Delivered & PaymentPending"},{StatusId:6,StatusName:"Paid & DeliveryPending"}],this.allowedStatus=[5],this.dropdownList=[],this.selectedItems=[],this.dropdownSettings={},this.showItems={},this.filterStatus=this.dataService.getSelectedStatusFromLocalStorage()}ngOnInit(){this.user=this.dataService.getUserFromLocalStorage(),this.getCreditDebits(),this.getStatusMaster(),this.searchCustomer(),this.searchModelChangeSubscription=this.searchModelChanged.pipe((0,Z.b)(800),(0,A.x)()).subscribe(e=>{this.searchText=e.trim(),console.log(e),this.searchCustomer()}),this.dropdownSettings={singleSelection:!1,idField:"StatusId",textField:"StatusName",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0}}onChangeSelectedUser(e){this.SelectedUser=e,this.getorderByCustomerId()}searchCustomer(){const e={SearchString:this.searchText||""};this.customerList=[],this.MasterService.SearchCustomer(e).subscribe(r=>{200==r.status&&(this.customerList=r.data)})}getCreditDebits(){this.CreditDebitService.getAllCreditDebit().subscribe(e=>{200==e.status&&(this.creditDebitListOriginal=e.data.reverse(),this.creditDebitList=e.data)})}deleteLedger(e){this.CreditDebitService.deleteCreditDebitById(e).subscribe(r=>{alert(r.message),200==r.status&&this.getCreditDebits()})}getAllPendingPayments(){}Remaining(e=0,r=0){return Math.round(e-r)}getStatusMaster(){this.MasterService.getStatusMaster().subscribe(e=>{200==e.status&&(this.status=e.data)})}getorderByCustomerId(){this.MasterService.getorderByCustomerId(this.SelectedUser.customer_id).subscribe(e=>{200==e.status&&(this.orderListOriginal=e.data,this.orderList=e.data)})}onChangeStatus(e,r){confirm(r.cName+'ji ka "'+r.units+" "+r.name+'" ka status change karna hai? Amount: Rs. '+r.units*r.unit_cost+"?")}onCancelCompleteCreditDebit(e){confirm(e.cName+"ji ka complete "+e.order_id+" order cancel krna hai? ")}filterCreditDebit(e){this.orderList=this.orderListOriginal,this.orderList=e.length?this.globalService.filterByValue(this.orderList,e):this.orderListOriginal,console.log(this.orderList)}onItemSelect(e){console.log(e)}onSelectAll(e){console.log(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(S.m),t.Y36(_.g),t.Y36(f.D),t.Y36(h.p),t.Y36(C.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-debit-list"]],decls:10,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],[1,"m-0","p-0"],["class","list-unstyled",4,"ngFor","ngForOf"],[1,"list-unstyled"],[1,"date","bg-dark","text-white","rounded","font-italic"],[1,"card-ul","w-100"],["class","card-li",3,"ngClass",4,"ngFor","ngForOf"],[1,"card-li",3,"ngClass"],[1,"m-0","ft-30",3,"ngClass"],["aria-hidden","true",1,"fa","ft-19",3,"ngClass"],["href","javascript:void(0)","routerLinkActive","router-link-active",3,"routerLink",4,"ngIf"],[4,"ngIf"],["href","javascript:void(0)","routerLink","[item.customer_id]","routerLinkActive","router-link-active",3,"queryParams"],["class","text-muted",4,"ngIf"],["href","javascript:void(0);",1,"",3,"click"],["aria-hidden","true",1,"fa","fa-whatsapp","ft-30"],[1,"m-0"],["href","javascript:void(0)","routerLinkActive","router-link-active",3,"routerLink"],[1,"text-muted"],["href","javascript:void(0)","routerLinkActive","router-link-active"],["href","javascript:void(0)","routerLink","[item.saleman_id]","routerLinkActive","router-link-active",3,"queryParams"]],template:function(e,r){1&e&&(t._UZ(0,"app-header")(1,"br"),t.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"h3")(6,"strong")(7,"u"),t._uU(8,"Ledger Complete Audit"),t.qZA()()()(),t.YNc(9,ht,5,4,"div",3),t.qZA()()),2&e&&(t.xp6(9),t.Q6J("ngIf",r.user&&r.user.Role<=8))},dependencies:[u.yS,u.Od,c.mk,c.sg,c.O5,b.P,c.uU,v.e,x],styles:["ul.card-ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}ul.card-ul[_ngcontent-%COMP%]   li.card-li[_ngcontent-%COMP%]{display:inline-block;clear:both;padding:15px;margin-bottom:4px;font-family:Helvetica,Arial,sans-serif}.credit[_ngcontent-%COMP%]{border:2px solid darkgrey;float:left;border-radius:0 30px 30px/0px 30px 30px;margin-right:20px}.debit[_ngcontent-%COMP%]{float:right;border:2px solid darkgrey;border-radius:30px 0 30px 30px/30px 0px 30px 30px;margin-left:20px}.debit[_ngcontent-%COMP%]:last-of-type{border-bottom-right-radius:30px}.deleted[_ngcontent-%COMP%]{text-decoration:line-through}.date[_ngcontent-%COMP%]{padding:0 8px;margin:auto}.container[_ngcontent-%COMP%]{margin-top:6%}"]}),i})()},{path:"commu",canActivate:[p.B],component:j},{path:"audit/:id",canActivate:[p.B],component:et},{path:"**",redirectTo:"audit"}];let bt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(Ct),u.Bz]}),i})();var vt=d(2271);let xt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[bt,vt.m,T.Z.forRoot()]}),i})()}}]);