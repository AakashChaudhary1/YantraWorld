"use strict";(self.webpackChunkYantraWorld=self.webpackChunkYantraWorld||[]).push([[542],{8542:(j,h,a)=>{a.r(h),a.d(h,{CheckoutModule:()=>B});var l=a(8781),d=a(1669),t=a(1571),g=a(4417),u=a(6895),s=a(433),p=a(4339);function Z(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"label",19),t._uU(2,"Email "),t.qZA(),t.TgZ(3,"input",20),t.NdJ("ngModelChange",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.customerInfor.email=i)}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.customerInfor.email)}}function y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"h4",3),t._uU(3,"Billing Address"),t.qZA(),t.TgZ(4,"form",4,5)(6,"div",6)(7,"div",7)(8,"label",8),t._uU(9,"Full name"),t.qZA(),t.TgZ(10,"input",9),t.NdJ("ngModelChange",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.customerInfor.name=i)}),t.qZA()(),t.YNc(11,Z,4,1,"div",10),t.qZA(),t.TgZ(12,"div",3)(13,"label",11),t._uU(14,"Address"),t.qZA(),t.TgZ(15,"input",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.customerInfor.address_1=i)}),t.qZA()(),t.TgZ(16,"div",6)(17,"div",13)(18,"label",14),t._uU(19,"Zip"),t.qZA(),t.TgZ(20,"input",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.customerInfor.postal_code=i)}),t.qZA()()(),t._UZ(21,"hr",16),t.qZA()(),t.TgZ(22,"div",17)(23,"a",18),t._uU(24,"Next"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(10),t.Q6J("ngModel",e.customerInfor.name),t.xp6(1),t.Q6J("ngIf",e.customerInfor&&e.customerInfor.email),t.xp6(4),t.Q6J("ngModel",e.customerInfor.address_1),t.xp6(5),t.Q6J("ngModel",e.customerInfor.postal_code)}}let x=(()=>{class n{constructor(e){this.dataService=e,this.customerInfor={}}ngOnInit(){this.customerInfor=this.dataService.getUserFromLocalStorage()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-customer-info"]],decls:2,vars:1,consts:[["class","container mt-3",4,"ngIf"],[1,"container","mt-3"],[1,"col-md","order-md-1"],[1,"mb-3"],[1,"needs-validation"],["userDetailsForm","ngForm"],[1,"row"],[1,"col-md-6","mb-3"],["for","firstName"],["type","text","readonly","","id","","name","firstName",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6 mb-3",4,"ngIf"],["for","address"],["type","text","id","","placeholder","1234 Main St","name","address1","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-3","mb-3"],["for","zip"],["type","text","id","","placeholder","ZipCode","name","address2","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-4"],[1,"pull-right","mt-2"],["routerLink","/checkout/payment-information",1,"btn","btn-success"],["for","email"],["type","email","id","","name","email","readonly","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,o){1&e&&(t._UZ(0,"app-header"),t.YNc(1,y,25,4,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",o.customerInfor&&o.customerInfor.mob_phone))},dependencies:[l.yS,u.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,p.P]}),n})(),P=(()=>{class n{constructor(){}ngOnInit(){localStorage.removeItem("Cart")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-order-confirmation"]],decls:15,vars:0,consts:[[1,"jumbotron","text-xs-center"],[1,"display-3"],[1,"lead"],["href",""],["routerLink","/","role","button",1,"btn","btn-success"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Thank You!"),t.qZA(),t.TgZ(3,"p",2),t._uU(4,"Your Payment has been recived to us. "),t.TgZ(5,"strong"),t._uU(6,"Please check your email"),t.qZA()(),t._UZ(7,"hr"),t.TgZ(8,"p"),t._uU(9," Having trouble? "),t.TgZ(10,"a",3),t._uU(11,"Contact us"),t.qZA()(),t.TgZ(12,"p",2)(13,"a",4),t._uU(14,"Continue to homepage"),t.qZA()()())},dependencies:[l.yS]}),n})();var f=a(9788),_=a(4852),U=a(3835),C=a(324),T=a(7185);let b=(()=>{class n{constructor(e,o,i,c,m){this.router=e,this.toastr=o,this.GlobalService=i,this.checkoutService=c,this.dataService=m,this.showSuccess=!1,this.showCancel=!1,this.showError=!1,this.totalAmount=0,this.comments="",this.currency="USD",this.cart=[],this.productList=[]}ngOnInit(){this.cart=JSON.parse(localStorage.getItem("Cart")),this.cart.length&&this.cart.forEach(e=>{this.productList.push({name:e.Name,quantity:e.Quantity,category:`${e.DepartmentName} - ${e.CategoryName}`,unit_amount:{currency_code:`${this.currency}`,value:`${e.Price}`}}),this.totalAmount+=e.Price*e.Quantity})}initConfig(){const e=this;this.loggedInUser=this.dataService.getUserFromLocalStorage(),this.user=this.SelectedUser?this.SelectedUser:this.loggedInUser,e.checkoutService.CreatePaypalTransacton({Cart:this.cart,User:this.user,Remarks:this.comments,SalesmanId:this.loggedInUser.customer_id||null}).subscribe(i=>{alert(i.message),i.status&&200==i.status&&(localStorage.removeItem("Cart"),localStorage.removeItem("cart"),this.toastr.success(i.message),setTimeout(()=>{e.router.navigate(this.loggedInUser&&this.loggedInUser.Role<=8?["/emp-access/all"]:["/order/history"])},1e3))})}resetStatus(){console.log("Method not implemented.")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.F0),t.Y36(T._W),t.Y36(_.U),t.Y36(f.Z),t.Y36(g.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-paypal-checkout"]],inputs:{totalAmount:"totalAmount",comments:"comments",SelectedUser:["SelectedUserData","SelectedUser"]},decls:2,vars:0,consts:[[1,"btn","btn-success",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.initConfig()}),t._uU(1," Place your order"),t.qZA())}}),n})();function S(n,r){1&n&&(t.TgZ(0,"div",29)(1,"h3"),t._uU(2," Place order for Retailer "),t.qZA()())}function M(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",6),t._uU(4),t.qZA(),t.TgZ(5,"td",6),t._uU(6),t.qZA(),t.TgZ(7,"td",10),t._uU(8),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.Name),t.xp6(2),t.hij("\u20b9 ",e.Price,""),t.xp6(2),t.Oqu(e.Quantity),t.xp6(2),t.hij("\u20b9 ",e.Price*e.Quantity,"")}}function I(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"label",33),t._uU(2,"Select Retailer To Place Order: "),t.qZA(),t.TgZ(3,"ng-multiselect-dropdown",34),t.NdJ("onSelect",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onChangeSelectedUser(i))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("placeholder","Select Retailer for orderlist")("settings",e.customerListDropdownSettings)("data",e.customerList)}}function A(n,r){if(1&n&&(t.TgZ(0,"div",30),t.YNc(1,I,4,3,"div",31),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.customerList&&e.customerList.length)}}function O(n,r){if(1&n&&t._UZ(0,"app-paypal-checkout",35),2&n){const e=t.oxw();t.Q6J("comments",e.remark)("SelectedUserData",e.SelectedUser)("totalAmount",e.totalPrice)}}function w(n,r){1&n&&(t.TgZ(0,"span",36),t._uU(1,"Please Search and Select a Retailer to place the order "),t.qZA())}let q=(()=>{class n{constructor(e,o,i,c){this.checkoutService=e,this.GlobalService=o,this.MasterService=i,this.dataService=c,this.totalPrice=0,this.tax=6.4,this.remark="",this.productList=[],this.customerListDropdownSettings={singleSelection:!1,idField:"customer_id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,limitSelection:1,allowSearchFilter:!0};const m=JSON.parse(localStorage.getItem("Cart"));this.LoggedinUser=this.dataService.getUserFromLocalStorage(),this.checkoutProducts=m,m.forEach(v=>{this.totalPrice+=v.Price*v.Quantity}),this.totalPrice=Math.round(this.totalPrice)}ngOnInit(){this.searchCustomer(),this.cart=JSON.parse(localStorage.getItem("Cart")),this.cart.length&&(this.cart.forEach(e=>{this.productList.push({name:e.Name,quantity:e.Quantity,category:`${e.DepartmentName} - ${e.CategoryName}`,unit_amount:{currency_code:`${this.currency}`,value:`${e.Price}`}}),this.totalAmount+=e.Price*e.Quantity}),this.calculateDeliveryChargesBeforePlaced())}calculateDeliveryChargesBeforePlaced(){this.LoggedinUser=this.dataService.getUserFromLocalStorage(),this.user=this.SelectedUser?this.SelectedUser:this.LoggedinUser,this.checkoutService.calculateDeliveryChargesBeforePlaced({Cart:this.cart,User:this.user}).subscribe(i=>{i.status&&200==i.status&&(this.delivery_charges=i.data.delivery_charges||0)})}onChangeSelectedUser(e){this.SelectedUser=e}searchCustomer(){const e={SearchString:this.searchText||""};this.customerList=[],this.MasterService.SearchCustomer(e).subscribe(o=>{200==o.status&&(this.customerList=o.data)})}ngOnDestroy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.Z),t.Y36(_.U),t.Y36(U.m),t.Y36(g.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment-info"]],decls:63,vars:9,consts:[[1,"container"],[1,"row","mt-5"],["class","col-md-12 mt-5",4,"ngIf"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"text-xs-center"],[1,"card-block"],[1,"table-responsive-sm"],[1,"table","table-sm"],[1,"text-xs-right"],[4,"ngFor","ngForOf"],[1,"highrow"],[1,"highrow","text-xs-center"],[1,"highrow","text-xs-right"],[1,"row","pb-5","px-4","bg-white","shadow-sm","w-100"],[1,"col-lg-6"],[1,"bg-light","px-4","py-3","text-uppercase","font-weight-bold"],[1,"p-4"],[1,"font-italic","mb-4"],["name","","cols","30","rows","2",1,"form-control",3,"ngModel","ngModelChange"],[1,"pr-4","pl-4-0"],[1,"list-unstyled","mb-4"],[1,"d-flex","justify-content-between","py-3","border-bottom"],[1,"text-muted"],[1,"font-weight-bold"],["class","col-md-12 mb-3",4,"ngIf"],["class","w-100 pull-right",3,"comments","SelectedUserData","totalAmount",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"col-md-12","mt-5"],[1,"col-md-12","mb-3"],["class","form-group ",4,"ngIf"],[1,"form-group"],["for","userId",1,"text-uppercase","fw-bold"],[1,"w-100",3,"placeholder","settings","data","onSelect"],[1,"w-100","pull-right",3,"comments","SelectedUserData","totalAmount"],[1,"text-danger"]],template:function(e,o){1&e&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"div",1),t.YNc(3,S,3,0,"div",2),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"h3",6)(8,"strong"),t._uU(9,"Cart summary"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"td")(16,"strong"),t._uU(17,"Item Name"),t.qZA()(),t.TgZ(18,"td",6)(19,"strong"),t._uU(20,"Item Price"),t.qZA()(),t.TgZ(21,"td",6)(22,"strong"),t._uU(23,"Item Quantity"),t.qZA()(),t.TgZ(24,"td",10)(25,"strong"),t._uU(26,"Total"),t.qZA()()()(),t.TgZ(27,"tbody"),t.YNc(28,M,9,4,"tr",11),t.TgZ(29,"tr"),t._UZ(30,"td",12)(31,"td",12)(32,"td",13)(33,"td",14),t.qZA()()(),t.TgZ(34,"div",15)(35,"div",16)(36,"div",17),t._uU(37,"Instructions for seller "),t.qZA(),t.TgZ(38,"div",18)(39,"p",19),t._uU(40,"If you have some information for the seller you can leave them in the box below "),t.qZA(),t.TgZ(41,"textarea",20),t.NdJ("ngModelChange",function(c){return o.remark=c}),t.qZA()()(),t.TgZ(42,"div",16)(43,"div",21)(44,"ul",22)(45,"li",23)(46,"strong",24),t._uU(47,"Order Subtotal "),t.qZA(),t.TgZ(48,"strong"),t._uU(49),t.qZA()(),t.TgZ(50,"li",23)(51,"strong",24),t._uU(52,"Shipping and handling"),t.qZA(),t.TgZ(53,"strong"),t._uU(54),t.qZA()(),t.TgZ(55,"li",23)(56,"strong",24),t._uU(57,"Total"),t.qZA(),t.TgZ(58,"h5",25),t._uU(59),t.qZA()()(),t.YNc(60,A,2,1,"div",26),t.YNc(61,O,1,3,"app-paypal-checkout",27),t.YNc(62,w,2,0,"span",28),t.qZA()()()()()()()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.LoggedinUser&&o.LoggedinUser.Role<=8),t.xp6(25),t.Q6J("ngForOf",o.checkoutProducts),t.xp6(13),t.Q6J("ngModel",o.remark),t.xp6(8),t.hij("\u20b9 ",o.totalPrice,""),t.xp6(5),t.hij("\u20b9 ",o.delivery_charges,""),t.xp6(5),t.hij("\u20b9 ",o.totalPrice+o.delivery_charges,""),t.xp6(1),t.Q6J("ngIf",o.user&&o.user.Role<=8),t.xp6(1),t.Q6J("ngIf",o.SelectedUser||o.LoggedinUser&&o.LoggedinUser.Role>8),t.xp6(1),t.Q6J("ngIf",!o.SelectedUser&&o.LoggedinUser&&o.LoggedinUser.Role<=8))},dependencies:[u.sg,u.O5,s.Fj,s.JJ,s.On,p.P,C.O,b],styles:[".height[_ngcontent-%COMP%]{min-height:200px}.icon[_ngcontent-%COMP%]{font-size:47px;color:#5cb85c}.iconbig[_ngcontent-%COMP%]{font-size:77px;color:#5cb85c}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > .emptyrow[_ngcontent-%COMP%]{border-top:none}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > .emptyrow[_ngcontent-%COMP%]{border-bottom:none}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > .highrow[_ngcontent-%COMP%]{border-top:3px solid}"]}),n})();function k(n,r){if(1&n&&(t.TgZ(0,"li",9)(1,"div"),t._UZ(2,"img",10),t.qZA(),t.TgZ(3,"div",11)(4,"h6",12)(5,"strong"),t._uU(6),t.qZA()(),t.TgZ(7,"strong",13)(8,"div"),t._uU(9),t.qZA()(),t.TgZ(10,"strong",13)(11,"div",6),t._uU(12),t.qZA()()()()),2&n){const e=r.$implicit;t.xp6(2),t.Q6J("src",e.Thumbnail,t.LSH)("alt",e.Name),t.xp6(4),t.Oqu(e.Name),t.xp6(3),t.hij(" Quantity: ",e.Quantity," "),t.xp6(3),t.hij(" \u20b9 ",e.Price*e.Quantity," ")}}const J=function(){return["/checkout/customer-information"]};function L(n,r){if(1&n&&(t.TgZ(0,"div",2)(1,"ul",3),t.YNc(2,k,13,5,"li",4),t._UZ(3,"hr"),t.TgZ(4,"li",5)(5,"span"),t._uU(6,"Total (INR)"),t.qZA(),t.TgZ(7,"strong",6),t._uU(8),t.qZA()()(),t.TgZ(9,"div",7)(10,"a",8),t._uU(11,"Next"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.checkoutProducts),t.xp6(6),t.hij("\u20b9 ",e.totalPrice,""),t.xp6(2),t.Q6J("routerLink",t.DdM(3,J))}}function N(n,r){1&n&&(t.TgZ(0,"div",14)(1,"h3"),t._uU(2," Please Login to Place your order. "),t.qZA(),t.TgZ(3,"div",15)(4,"a",16),t._uU(5,"Sign up"),t.qZA()(),t.TgZ(6,"div",15)(7,"a",17),t._uU(8,"Login"),t.qZA()()())}const Y=[{path:"review",canActivate:[d.B],component:(()=>{class n{constructor(e){this.dataService=e,this.totalPrice=0,this.user={};const o=JSON.parse(localStorage.getItem("Cart"));this.checkoutProducts=o,o.forEach(i=>{this.totalPrice+=i.Price*i.Quantity})}ngOnInit(){this.user=this.dataService.getUserFromLocalStorage()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-review"]],decls:4,vars:2,consts:[["class","container mt-5",4,"ngIf"],["class","container mt-3",4,"ngIf"],[1,"container","mt-5"],[1,"list-group","mb-3"],["class","list-group-item d-flex lh-condensed",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between"],[1,"price"],[1,"pull-right","mt-2"],["routerLinkActive","active",1,"btn","btn-success",3,"routerLink"],[1,"list-group-item","d-flex","lh-condensed"],["height","100",3,"src","alt"],[1,"pl-5",2,"padding","10px"],[1,"my-0"],[1,""],[1,"container","mt-3"],[1,"pull-left"],["routerLink","/customer/register",1,"btn","btn-info"],["routerLink","/customer/login",1,"btn","btn-info"]],template:function(e,o){1&e&&(t._UZ(0,"app-header")(1,"br"),t.YNc(2,L,12,4,"div",0),t.YNc(3,N,9,0,"div",1)),2&e&&(t.xp6(2),t.Q6J("ngIf",o.user&&o.user.mob_phone),t.xp6(1),t.Q6J("ngIf",!o.user||!o.user.mob_phone))},dependencies:[l.yS,l.Od,u.sg,u.O5,p.P],styles:[".price[_ngcontent-%COMP%]{color:#16a085;font-size:17px;font-weight:700;display:block}"]}),n})(),data:{title:"Order Review"}},{path:"customer-information",canActivate:[d.B],component:x,data:{title:"Customer Information"}},{path:"payment-information",canActivate:[d.B],component:q,data:{title:"Payment Information"}},{path:"shopping-cart",canActivate:[d.B],component:(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-cart"]],decls:0,vars:0,template:function(e,o){},styles:[".product-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.img-responsive[_ngcontent-%COMP%]{width:120px;object-fit:contain}.quantity[_ngcontent-%COMP%]{float:left;margin-right:15px;background-color:#eee;position:relative;width:80px;overflow:hidden;margin-top:6px}.quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;text-align:center;width:15px;height:15px;padding:0;float:right;color:#000;font-size:20px;border:0;outline:0;background-color:#f6f6f6}.quantity[_ngcontent-%COMP%]   input.qty[_ngcontent-%COMP%]{position:relative;border:0;width:100%;height:46px;padding:10px 25px 10px 10px;text-align:center;font-weight:400;font-size:15px;border-radius:0;background-clip:padding-box}.quantity[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%], .quantity[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{line-height:0;background-clip:padding-box;border-radius:0;color:#000;font-size:20px;position:absolute;height:50%;border:0;right:0;padding:0;width:25px;z-index:3}.quantity[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]:hover, .quantity[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:hover{background-color:#dad8da}.quantity[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{bottom:0}.shopping-cart[_ngcontent-%COMP%]{margin-top:20px}.param[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{margin:0 7px 0 0;font-weight:600}.param-inline[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{vertical-align:baseline;display:inline-block}.param[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{margin:0;vertical-align:baseline}.price[_ngcontent-%COMP%]{color:#16a085;font-size:18px;font-weight:700;margin-right:5px;display:block}"]}),n})()},{path:"order/order-confirmation",canActivate:[d.B],component:P},{path:"**",redirectTo:"review"}];let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(Y),l.Bz]}),n})();var D=a(2271);let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[R,D.m,C.Z.forRoot()]}),n})()}}]);